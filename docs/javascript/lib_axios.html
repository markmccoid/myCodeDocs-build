<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Axios · My Code Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;&lt;a href=&quot;https://github.com/mzabriskie/axios&quot;&gt;Axios on Github&lt;/a&gt;&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Axios · My Code Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://mycodedocs.com/index.html"/><meta property="og:description" content="&lt;p&gt;&lt;a href=&quot;https://github.com/mzabriskie/axios&quot;&gt;Axios on Github&lt;/a&gt;&lt;/p&gt;
"/><meta property="og:image" content="https://mycodedocs.com/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://mycodedocs.com/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/mycodedocs.png" alt="My Code Docs"/><h2 class="headerTitleWithLogo">My Code Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/javascript/promises-and-async-await" target="_self">Docs</a></li><li class=""><a href="/docs/projects/tmdb-api-reference" target="_self">Projects</a></li><li class=""><a href="/docs/_components/component-mypromptalert" target="_self">Components</a></li><li class=""><a href="/help" target="_self">Help</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>JS/React Libs</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Javascript</h3><ul><li class="navListItem"><a class="navItem" href="/docs/javascript/promises-and-async-await">Promises and Asnyc/Await</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/using-local-storage">Local Storage</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/firebase">Firebase</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/language-basics">JS Language Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/js-array-functions">JS Array Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/keyboard-mouse-input">Keyboard and Mouse Input</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/es-6-cheatsheet">ES6 Cheatsheet</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/eslint-setup">ESLint Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/data-structures">Data Structures</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/naming-conventions">Naming Conventions</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/javascript-resources">Javascript Resources</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/javascript-snippets">Javascript Snippets</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/npm-module-creation">npm Module Creation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">JS/React Libs</h3><ul><li class="navListItem"><a class="navItem" href="/docs/javascript/lib_lodash-library">Lodash Library</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/javascript/lib_axios">Axios</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/lib_ramda">Ramda</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/lib_momentjs">Moment JS</a></li><li class="navListItem"><a class="navItem" href="/docs/javascript/lib_redux-forms">Redux Forms npm Module</a></li><li class="navListItem"><a class="navItem" href="/docs/react/lib_reactbeautifuldnd">React Beautiful DnD</a></li><li class="navListItem"><a class="navItem" href="/docs/react/lib_antdesign">Ant Design</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">React</h3><ul><li class="navListItem"><a class="navItem" href="/docs/react/react-basics">React Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/react/react-hooks">React Hooks</a></li><li class="navListItem"><a class="navItem" href="/docs/react/react-with-classes">React With Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/react/reach-router">Reach Router</a></li><li class="navListItem"><a class="navItem" href="/docs/react/react-router">React Router</a></li><li class="navListItem"><a class="navItem" href="/docs/react/react-components">React Components</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Redux</h3><ul><li class="navListItem"><a class="navItem" href="/docs/redux/react-redux">Redux in React</a></li><li class="navListItem"><a class="navItem" href="/docs/redux/my-redux-pattern">My Redux Pattern</a></li><li class="navListItem"><a class="navItem" href="/docs/redux/react-redux-compliment">Redux with React (First Doc)</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">HTMLCSS</h3><ul><li class="navListItem"><a class="navItem" href="/docs/html-css/html-css-snippets">HTML and CSS Snippets</a></li><li class="navListItem"><a class="navItem" href="/docs/html-css/tailwindcss">Tailwind CSS</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Electron</h3><ul><li class="navListItem"><a class="navItem" href="/docs/electron/electron-react-boiler">Electron React Boiler</a></li><li class="navListItem"><a class="navItem" href="/docs/electron/electron-basics">Electron Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/electron/electron-packaging">Electron Packaging</a></li><li class="navListItem"><a class="navItem" href="/docs/electron/electron-tooling">Electron Tooling</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Axios</h1></header><article><div><span><p><a href="https://github.com/mzabriskie/axios">Axios on Github</a></p>
<p>I currently use this to make calls to site APIs that return JSON data.</p>
<p>I have been using the current format:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTVInfoById</span> (<span class="hljs-params">tvShowID</span>) </span>{
     <span class="hljs-keyword">var</span> encodedtvShowID = <span class="hljs-built_in">encodeURIComponent</span>(tvShowID);
        <span class="hljs-keyword">var</span> requestUrl = <span class="hljs-string">`<span class="hljs-subst">${TVMAZESHOWSEARCH_URL}</span>?q=<span class="hljs-subst">${encodedtvShowID}</span>`</span>;
    
        <span class="hljs-keyword">return</span> axios.get(requestUrl).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
                <span class="hljs-keyword">if</span>(res.data.cod &amp;&amp; res.data.message) {
                    <span class="hljs-comment">// console.log(res.data.message);</span>
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(res.data.message);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// console.log (res.data);</span>
                    <span class="hljs-comment">//return res.data.main.temp;</span>
                    <span class="hljs-keyword">return</span> res.data;
                }
            }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>)</span>{
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(res.data.message);
            });
    }
</code></pre>
<p>The above example is a return from a function. The function is going to return a promise.</p>
<p><strong>Note</strong> that the if (res.data.cod &amp;&amp;...) stuff is specific to the return from the API. This API returns an error in the data response and thus we are checking for these to be populated and if they are throwing an error. If not, we return the data.</p>
<pre><code class="hljs css language-javascript">axios.get() makes the request and waits <span class="hljs-keyword">for</span> the <span class="hljs-keyword">return</span> (thus the .then()...).
</code></pre>
<p>We return the promise the <em>axios.get()</em> returns, which we setup waiting for the reponse:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">var</span> showAPIData =   tvMaze.getTVInfoById(selectedShowId).then(<span class="hljs-function">(<span class="hljs-params">theData</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">showSelected</span>: {
                <span class="hljs-attr">showSelectedId</span>: selectedShowId,
                <span class="hljs-attr">tvMazeAPIData</span>: theData
            }
        });
        }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>)</span>{
            <span class="hljs-built_in">console</span>.log(e);
        }
    );
</code></pre>
<p>The variable <strong>showAPIData</strong> will have a promise stored in it as this is what the getTVInfoById is returning ( see above function ). Normally there is no need to store it in a variable, I'm not sure if there is a use, but currently I am not storing this. Just running it and getting the data I want back.</p>
<p>So, axios.get() will let you make a single call and get data back, but if you have multiple calls you want to make, you can use the axios.all() and axios.spread() functionality</p>
<pre><code class="hljs css language-javascript">getTVInfoAndEpisodes: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">tvShowId</span>) </span>{
<span class="hljs-keyword">var</span> encodedtvShowId = <span class="hljs-built_in">encodeURIComponent</span>(tvShowId);
<span class="hljs-keyword">var</span> requestUrl = <span class="hljs-string">`<span class="hljs-subst">${TVMAZEIDSEARCH_URL}</span><span class="hljs-subst">${encodedtvShowId}</span>`</span>;

<span class="hljs-keyword">return</span> axios.all([
        axios.get(requestUrl),
        axios.get(<span class="hljs-string">`<span class="hljs-subst">${requestUrl}</span>/episodes`</span>)
    ])
    .then(axios.spread(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">showInfoResponse, episodeResponse</span>)</span>{
        <span class="hljs-keyword">var</span> showData = showInfoResponse.data;
        <span class="hljs-keyword">var</span> episodeData = episodeResponse.data;
        <span class="hljs-keyword">var</span> epObj;
        <span class="hljs-comment">//Get array of unique seasons</span>
        <span class="hljs-keyword">var</span> seasons = _.uniq(episodeData.map(<span class="hljs-function">(<span class="hljs-params">episode</span>) =&gt;</span> {
                <span class="hljs-keyword">return</span> (episode.season);
        }));
        <span class="hljs-comment">//Produce an Array of objects one for each season</span>
        <span class="hljs-comment">// [{</span>
        <span class="hljs-comment">//  season: 1,</span>
        <span class="hljs-comment">//  episodes: 12,</span>
        <span class="hljs-comment">//  episodeDetail: [{</span>
        <span class="hljs-comment">//      episodeNumber: 1,</span>
        <span class="hljs-comment">//      episodeName:'the name',</span>
        <span class="hljs-comment">//      episodeAirDate: '2009-03-18'</span>
        <span class="hljs-comment">//  },</span>
        <span class="hljs-comment">//  {...}]</span>
        <span class="hljs-comment">// },</span>
        <span class="hljs-comment">// {...}]</span>
        <span class="hljs-keyword">var</span> seasonArray = seasons.map(<span class="hljs-function">(<span class="hljs-params">seasonNum</span>) =&gt;</span> {
                <span class="hljs-keyword">var</span> seasonObj = {
                        <span class="hljs-attr">season</span>: seasonNum,
                        <span class="hljs-attr">episodes</span>: episodeData.filter(<span class="hljs-function">(<span class="hljs-params">episode</span>) =&gt;</span> episode.season === seasonNum).length - <span class="hljs-number">1</span>,
                        <span class="hljs-attr">episodeDetail</span>: episodeData.filter(<span class="hljs-function">(<span class="hljs-params">episode</span>) =&gt;</span> episode.season === seasonNum)
                                .map(<span class="hljs-function">(<span class="hljs-params">episode</span>) =&gt;</span> {
                                                <span class="hljs-keyword">return</span> ({
                                                                <span class="hljs-attr">episodeNumber</span>: episode.number,
                                                                <span class="hljs-attr">episodeName</span>: episode.name,
                                                                <span class="hljs-attr">episodeAirDate</span>: episode.airdate
                                                        });
                                        })
                };
                <span class="hljs-keyword">return</span> seasonObj;
        });
    <span class="hljs-comment">//Last step is to return the show data and the seasonData that we build above.</span>
    <span class="hljs-keyword">return</span> ({<span class="hljs-attr">showData</span>: showData,
        <span class="hljs-attr">seasonData</span>: seasonArray} );
    }));
}
</code></pre>
<p>To break this down, the first part is telling axios which &quot;gets&quot; you want to get:</p>
<pre><code class="hljs css language-javascript">axios.all([
    axios.get(requestUrl),
    axios.get(<span class="hljs-string">`<span class="hljs-subst">${requestUrl}</span>/episodes`</span>)
])
</code></pre>
<p>This allows you to run your API calls in parallel. However, the &quot;then&quot; function won't be run until data is back from both requests! I think this is a good thing. Takes a bit of the async pain away.</p>
<p>Now, once both requests finish and the &quot;then&quot; function is called, we will use the axios.spread() functionality to put each request's return data into separate parameters.</p>
<pre><code class="hljs css language-javascript">    .then(axios.spread(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">showInfoResponse, episodeResponse</span>)</span>{
     ...
    }
</code></pre>
<p>This allows you to drop the return data into separate parameters. As far as I can tell, the order of the parameters should match the order of the .get call is the axios.all()'s array.</p>
<p>Note that the <strong>JavaScript Promise</strong> object has a .all method that behaves very similarly to the axios.all:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> weather = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        resolve({ <span class="hljs-attr">temp</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">conditions</span>: <span class="hljs-string">'Sunny with Clouds'</span>});
    }, <span class="hljs-number">2000</span>);
    });
    <span class="hljs-keyword">const</span> tweets = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        resolve([<span class="hljs-string">'I like cake'</span>, <span class="hljs-string">'BBQ is good too!'</span>]);
        }, <span class="hljs-number">500</span>);
        });
    <span class="hljs-built_in">Promise</span>
        .all([weather, tweets])
        .then(<span class="hljs-function"><span class="hljs-params">responses</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> [weatherInfo, tweetInfo] = responses;
        <span class="hljs-built_in">console</span>.log(weatherInfo, tweetInfo)
});
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/javascript/lib_lodash-library"><span class="arrow-prev">← </span><span>Lodash Library</span></a><a class="docs-next button" href="/docs/javascript/lib_ramda"><span>Ramda</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/mycodedocs.png" alt="My Code Docs" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/docs/en/doc2.html">Guides (or other categories)</a><a href="/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 Your Name or Your Company Name</section></footer></div></body></html>